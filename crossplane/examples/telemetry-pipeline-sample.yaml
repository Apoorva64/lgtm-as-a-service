# Secret with S3-style credentials (env keys are consumed by the charts via extraEnvFrom)
apiVersion: v1
kind: Secret
metadata:
  name: demo-storage-credentials
  namespace: tenant-1
stringData:
  S3_ACCESS_KEY: "<ACCESS_KEY>"
  S3_SECRET_KEY: "<SECRET_KEY>"
---
apiVersion: example.crossplane.io/v1
kind: TelemetryPipeline
metadata:
  name: demo-pipeline
spec:
  tenant: demo
  namespace: tenant-1
  signals:
    traces: true
    logs: true
    metrics: true
  storage:
    region: us-east-1
    tempoBucketName: demo-tempo-bucket
    lokiBucketName: demo-loki-bucket
    mimirBucketName: demo-mimir-bucket
    credentialSecretRef:
      name: demo-storage-credentials
      namespace: tenant-1
      access_key: S3_ACCESS_KEY
      secret_key: S3_SECRET_KEY
  ingress:
    public: false
